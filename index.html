<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Console Rock Paper Scissors</title>
    </head>
    <body>
        <div id="content">
            <h1>Rock Paper Scissors</h1>
            <button id="rock">Rock</button>
            <button id="paper">Paper</button>
            <button id="scissors">Scissors</button>
            <div id="score">Score: 0 : 0</div>
        </div>
    </body>

    <script>
        
        let CHOICES = ['rock', 'paper', 'scissors'];
        let scoreArray = [0, 0];

        /** Function generates a random integer smaller than max.
         * @returns {number} - random integer
         */
        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
            }

        /** This function returns the computer's choice of either Rock, Paper or Scissors.
         *  @returns {string} - the computer's choice
         */
        function getComputerChoice() {
            return CHOICES[getRandomInt(3)]
        }

        function playSingleRound(playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase()
            let playerWinString = 'You Win! ' + playerSelection + ' beats ' + computerSelection + '.'
            let computerWinString = 'You Loose! ' + computerSelection + ' beats ' + playerSelection + '.'

            if (playerSelection == computerSelection) {
                return [0, "It's a tie!"];
            }

            if (playerSelection == 'rock') {
                console.log('test');
                if (computerSelection == 'scissors') return [1, playerWinString];
                
                else if (computerSelection == 'paper') return [-1, computerWinString];
            }

            if (playerSelection == 'paper') {
                if (computerSelection == 'rock') return [1, playerWinString];

                else if (computerSelection == 'scissors') return [-1, computerWinString];
            }

            if (playerSelection == 'scissors') {
                if (computerSelection == 'paper') return [1, playerWinString];

                else if (computerSelection == 'rock') return [-1, computerWinString];
            }
        }

        function updateScore(winner) {
            const score = document.querySelector('#score');
            if (winner == 1) scoreArray[0] += 1;
            else if (winner == -1) scoreArray[1] += 1;

            score.textContent = `Score: ${scoreArray[0]} ${scoreArray[1]}`
        }

        const buttons = document.querySelectorAll('button');
        buttons.forEach(element => {
            element.addEventListener('click', () => playSingleRound(element.id, getComputerChoice()));
        });

        // function game() {
        //     let score = 0;
        //     for (let i = 0; i < 5; i++) {
        //         let playerSelection = prompt('Which weapon do you wield?');
        //         while (!CHOICES.includes(playerSelection.toLowerCase())) {
        //             playerSelection = prompt("Be sure to use one of the following: rock, paper, scissors!")
        //         }
        //         let [win, message] = playSingleRound(playerSelection, getComputerChoice());
        //         console.log(message);
        //         score += win;
        //     }
        //     console.log(score)
        // }

        // game()

    </script>
</html>